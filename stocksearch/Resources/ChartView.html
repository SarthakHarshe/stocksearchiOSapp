<!-- ChartView.html -->
<!DOCTYPE html>
<html>
<head>
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/modules/series-label.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>
  <script src="https://code.highcharts.com/modules/export-data.js"></script>
  <script src="https://code.highcharts.com/modules/accessibility.js"></script>
  <style>
     body, html {
       margin: 0;
       padding: 0;
       height: 100%;
       width: 100%;
     }
     #hourly-chart-container, #historical-chart-container {
       height: 100%;
       width: 100%;
     }
   </style>
</head>
<body>
  <div id="hourly-chart-container"></div>
  <div id="historical-chart-container"></div>

 
 <script>
     document.addEventListener('DOMContentLoaded', function() {
         window.webkit.messageHandlers.logHandler.postMessage("HTML loaded and JavaScript ready.");
     });
   function updateHourlyChart(options) {
       try {
              console.log("Attempting to update chart with options:", options);
              Highcharts.chart('hourly-chart-container', options);
              console.log("Chart should now be visible.");
          } catch (e) {
              console.error("Error updating chart:", e.toString());
                     window.webkit.messageHandlers.logHandler.postMessage("Error in chart: " + e.toString());
          }
   }

   function updateHistoricalChart(options) {
       Highcharts.chart('historical-chart-container', options);
   }
     
 //For console.log to be seen in xcode console we added Javascript code to send log messages to the native side
 var oldLog = console.log;
    console.log = function (message) {
        window.webkit.messageHandlers.logHandler.postMessage(message);
        oldLog.apply(console, arguments);
    };
 </script>
</body>
</html>
